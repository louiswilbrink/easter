<div class="landing-page text-center">
    <div class="jumbotron">
        <div class="overlay">
            <div class="title" style="margin-top: 20px;">Highrock Easter Celebration</div>
            <div class="sub-title info" style="margin-bottom: 0px;">Arlington Town Hall</div><div class="separator info"> | </div><div class="sub-title info">Sunday, April 5, 2015</div>
            <div class="sub-title">730 Massachusetts Ave, Arlington, MA 02476, USA</div>
        </div>
    </div>
    <div class="container">
        <form method="post" action="/rsvp">
            <h1 class="title">Reserve a Seat</h1>
            <a name="form-top"></a>
            <div class="form-inline margin-bottom-md">
                <div class="form-group">
                    <label class="lw-label name-label" for="name">Name</label>
                    <input class="form-control" id="name" name="name" placeholder="Enter name">
                </div>
            </div>
            <div class="form-inline">
                <div class="form-group">
                    <label class="lw-label email-label" for="email">Email</label>
                    <input class="form-control" id="email" name="email" placeholder="Enter email">
                </div>
            </div>
            <hr class="lw-hr">
            <h1 class="title">Worship Services</h1>
            <div class="sub-title service-select">Select a time:</div>
            <div class="service-times">
                <div <% if(!services.first.isFull) { %> id="firstService" <% } %> 
                    class="service-container
                    <% if(!services.first.isFull) { %> enabled"> <% } %>
                    <% if(services.first.isFull) { %> disabled"> <% } %>
                        <div class="time-solo">8:30AM</div>
                        <% if(services.first.isFull) { %>
                        <div class="capacity-label">[ at capacity ]</div>
                        <% } %>
                </div>
                <div <% if(!services.second.isFull) { %> id="secondService" <% } %> 
                    class="service-container
                    <% if(!services.second.isFull) { %> enabled"> <% } %>
                    <% if(services.second.isFull) { %> disabled"> <% } %>
                        <div class="time-solo">11:00AM</div>
                        <% if(services.second.isFull) { %>
                        <div class="capacity-label">[ at capacity ]</div>
                        <% } %>
                </div>
                <div <% if(!services.third.isFull) { %> id="thirdService" <% } %> 
                    class="service-container
                    <% if(!services.third.isFull) { %> enabled"> <% } %>
                    <% if(services.third.isFull) { %> disabled"> <% } %>
                        <div class="time-solo">1:30PM</div>
                        <% if(services.third.isFull) { %>
                        <div class="capacity-label">[ at capacity ]</div>
                        <% } %>
                </div>
            </div>
            <div class="checkbox hidden">
                <label><input id="firstServiceCheckbox" name="firstService" type="checkbox">8:30AM</label>
                <label><input id="secondServiceCheckbox" name="secondService" type="checkbox">11:00AM</label>
                <label><input id="thirdServiceCheckbox" name="thirdService" type="checkbox">1:30PM</label>
            </div>
            <div class="select-container">
                <div class="select-label">Seats at the service:</div>
                <div class="button custom-select ff-hack">
                    <select name="guests">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                    </select>
                </div>
            </div>
            <hr class="lw-hr">
            <h1 class="title">Children's Program</h1>
            <div class="sub-title">Select a time:</div>
            <div class="sub-title">(or leave unselected)</div>
            <div class="service-times">
                <div id="firstChildrensService" class="service-container enabled">
                    <div class="time-solo">8:30AM</div>
                </div>
                <div id="secondChildrensService" class="service-container enabled">
                    <div class="time-solo">11:00AM</div>
                </div>
            </div>
            <div class="checkbox hidden">
                <label><input id="firstChildrensServiceCheckbox" name="firstChildrenService" type="checkbox">8:30AM</label>
                <label><input id="secondChildrensServiceCheckbox" name="secondChildrenService" type="checkbox">11:00AM</label>
            </div>
            <div id="infant-select-container" class="select-container hidden">
                <div class="select-label">Infants - 2 years:</div>
                <div id="infant-select" class="button custom-select ff-hack">
                    <select name="infants">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                    </select>
                </div>
                <div id="infant-full-label">Full</div>
            </div>
            <div id="preschooler-select-container" class="select-container hidden">
                <div class="select-label">Preschool (3 to 4 years):</div>
                <div id="preschooler-select" class="button custom-select ff-hack">
                    <select name="preschoolers">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                    </select>
                </div>
                <div id="preschooler-full-label">Full</div>
            </div>
            <div id="children-select-container" class="select-container hidden">
                <div class="select-label">Children (5 years to 5th grade):</div>
                <div id="children-select" class="button custom-select ff-hack">
                    <select name="children">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                    </select>
                </div>
                <div id="children-full-label">Full</div>
            </div>
            <hr class="lw-hr" style="margin-bottom: 50px;">
            <button id="submit" type="submit" class="btn btn-default btn-lg">Submit</button>
        </form>
        <input id="isFirstInfantFull" class="hidden" value="<%- childServices.first.isInfantFull %>"/>
        <input id="isSecondInfantFull" class="hidden" value="<%- childServices.second.isInfantFull %>"/>
        <input id="isFirstPreschoolerFull" class="hidden" value="<%- childServices.first.isPreschoolerFull %>"/>
        <input id="isSecondPreschoolerFull" class="hidden" value="<%- childServices.second.isPreschoolerFull %>"/>
        <input id="isFirstChildrenFull" class="hidden" value="<%- childServices.first.isChildrenFull %>"/>
        <input id="isSecondChildrenFull" class="hidden" value="<%- childServices.second.isChildrenFull %>"/>
    </div>
    <img class="logo" src="https://s3.amazonaws.com/highrock-easter/Highrock-Logo-easter.png"/>
    <div class="sub-title" style="margin-top: 30px; margin-bottom: 20px;">If you have any questions, please email us at info@highrock.org</div>
</div>
<script>

  var isFirstInfantFull = $('#isFirstInfantFull').val() === 'true' ? true : false;
  var isSecondInfantFull = $('#isSecondInfantFull').val() === 'true' ? true : false;
  var isFirstPreschoolerFull = $('#isFirstPreschoolerFull').val() === 'true' ? true : false;
  var isSecondPreschoolerFull = $('#isSecondPreschoolerFull').val() === 'true' ? true : false;
  var isFirstChildrenFull = $('#isFirstChildrenFull').val() === 'true' ? true : false;
  var isSecondChildrenFull = $('#isSecondChildrenFull').val() === 'true' ? true : false;

  $('#firstService').click(function () {
      $('#secondService').removeClass('selected');
      $('#secondServiceCheckbox').prop('checked', false);
      $('#thirdService').removeClass('selected');
      $('#thirdServiceCheckbox').prop('checked', false);
      $('#firstService').addClass('selected');
      $('#firstServiceCheckbox').prop('checked', true);
  });

  $('#secondService').click(function () {
      $('#firstService').removeClass('selected');
      $('#firstServiceCheckbox').prop('checked', false);
      $('#thirdService').removeClass('selected');
      $('#thirdServiceCheckbox').prop('checked', false);
      $('#secondService').addClass('selected');
      $('#secondServiceCheckbox').prop('checked', true);
  });

  $('#thirdService').click(function () {
      $('#firstService').removeClass('selected');
      $('#firstServiceCheckbox').prop('checked', false);
      $('#secondService').removeClass('selected');
      $('#secondServiceCheckbox').prop('checked', false);
      $('#thirdService').addClass('selected');
      $('#thirdServiceCheckbox').prop('checked', true);
  });

  $('#firstChildrensService').click(function () {
      $('#secondChildrensService').removeClass('selected');
      $('#secondChildrensServiceCheckbox').prop('checked', false);
      $('#firstChildrensService').addClass('selected');
      $('#firstChildrensServiceCheckbox').prop('checked', true);

      // Show available kid groups.
      $('#infant-select-container').removeClass('hidden');
      $('#preschooler-select-container').removeClass('hidden');
      $('#children-select-container').removeClass('hidden');

      if (isFirstInfantFull) {
          $('#infant-select').addClass('hidden');
          $('#infant-full-label').removeClass('hidden');
      }
      else {
          $('#infant-select').removeClass('hidden');
          $('#infant-full-label').addClass('hidden');
      }

      if (isFirstPreschoolerFull) {
          $('#preschooler-select').addClass('hidden');
          $('#preschooler-full-label').removeClass('hidden');
      }
      else {
          $('#preschooler-select').removeClass('hidden');
          $('#preschooler-full-label').addClass('hidden');
      }

      if (isFirstChildrenFull) {
          $('#children-select').addClass('hidden');
          $('#children-full-label').removeClass('hidden');
      }
      else {
          $('#children-select').removeClass('hidden');
          $('#children-full-label').addClass('hidden');
      }
  });

  $('#secondChildrensService').click(function () {
      $('#firstChildrensService').removeClass('selected');
      $('#firstChildrensServiceCheckbox').prop('checked', false);
      $('#secondChildrensService').addClass('selected');
      $('#secondChildrensServiceCheckbox').prop('checked', true);

      // Show available kid groups.
      $('#infant-select-container').removeClass('hidden');
      $('#preschooler-select-container').removeClass('hidden');
      $('#children-select-container').removeClass('hidden');

      if (isSecondInfantFull) {
          $('#infant-select').addClass('hidden');
          $('#infant-full-label').removeClass('hidden');
      }
      else {
          $('#infant-select').removeClass('hidden');
          $('#infant-full-label').addClass('hidden');
      }
      
      if (isSecondPreschoolerFull) {
          $('#preschooler-select').addClass('hidden');
          $('#preschooler-full-label').removeClass('hidden');
      }
      else {
          $('#preschooler-select').removeClass('hidden');
          $('#preschooler-full-label').addClass('hidden');
      }
      
      if (isSecondChildrenFull) {
          $('#children-select').addClass('hidden');
          $('#children-full-label').removeClass('hidden');
      }
      else {
          $('#children-select').removeClass('hidden');
          $('#children-full-label').addClass('hidden');
      }
  });

  $('#submit').click(function (event) {
      var service = $('#firstServiceCheckbox').prop('checked') ||
                    $('#secondServiceCheckbox').prop('checked') ||
                    $('#thirdServiceCheckbox').prop('checked');

      var isInvalid = false;

      if (!service) {
          event.preventDefault();
          $('.service-select').css('color', 'red');
          $('.service-select').html('Please select a service time:');
          isInvalid = true;
      }

      if ($('#name').val() == '') {
          event.preventDefault();
          $('.name-label').css('color', 'red');
          $('.name-label').html('Please enter your name:');
          isInvalid = true;
      }

      if ($('#email').val() == '') {
          event.preventDefault();
          $('.email-label').css('color', 'red');
          $('.email-label').html('Please enter your email:');
          isInvalid = true;
      }

      if (isInvalid) {
          location.hash = 'form-top';
      }
  });
</script>
